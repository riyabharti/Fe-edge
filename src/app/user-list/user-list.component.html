<br>
<h5 class="text-center text-danger fontS">Showing the checked Columns: (Check/Uncheck to show/hide any column)</h5>
<br>
<div class="row" style="margin: 0 5%;">
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('b')" [(ngModel)]="show[1]" class="fontS">Name</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('c')" [(ngModel)]="show[2]" class="fontS">Email ID</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('d')" [(ngModel)]="show[3]" class="fontS">Stream</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('e')" [(ngModel)]="show[4]" class="fontS">Year</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('f')" [(ngModel)]="show[5]" class="fontS">Contact#</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('g')" [(ngModel)]="show[6]" class="fontS">Institution Name</mat-checkbox>
    </div>
</div>
<div class="row" style="margin: 0 5%;">
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('h')" [(ngModel)]="show[7]" class="fontS">Registered On</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('i')" [(ngModel)]="show[8]" class="fontS">Payment Receipt</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('j')" [(ngModel)]="show[9]" class="fontS">UPI ID</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('k')" [(ngModel)]="show[10]" class="fontS">Coupon Photo</mat-checkbox>
    </div>
    <div class="col-md-2">
        <mat-checkbox color="warn" (click)="toggle('l')" [(ngModel)]="show[11]" class="fontS">Action</mat-checkbox>
    </div>
    <div class="col-md-2"></div>
</div>
<br>
<div class="mat-elevation-z8" style="margin: 0 5%;" *ngIf="!loading">
    <mat-form-field style="width: 100%;">
    <input matInput (input)="applyFilter($event.target.value)" placeholder="Filter">
    </mat-form-field>
    <table mat-table [dataSource]="dataSource" style="width: 100%;">
    <ng-container matColumnDef="a">
        <th mat-header-cell *matHeaderCellDef class="fontS"> # </th>
        <td mat-cell *matCellDef="let user; let i=index" class="fontS"> {{i+1}} </td>
    </ng-container>
    <ng-container matColumnDef="b">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Name </th>
        <td mat-cell *matCellDef="let user" class="fontS"> 
            {{user.name}} 
            <mat-chip-list *ngIf="user.admin" style="display: inline-block;">
                <mat-chip style="background: #dc3545; color: white; font-weight: bold;">Admin</mat-chip>
            </mat-chip-list> 
        </td>
    </ng-container>
    <ng-container matColumnDef="c">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Email ID </th>
        <td mat-cell *matCellDef="let user" class="fontS"> {{user.email}} </td>
    </ng-container>
    <ng-container matColumnDef="d">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Stream </th>
        <td mat-cell *matCellDef="let user" class="fontS"> {{user.stream}} </td>
    </ng-container>
    <ng-container matColumnDef="e">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Year </th>
        <td mat-cell *matCellDef="let user" class="fontS"> {{user.year}} </td>
    </ng-container>
    <ng-container matColumnDef="f">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Contact# </th>
        <td mat-cell *matCellDef="let user" class="fontS"> {{user.contact}} </td>
    </ng-container>
    <ng-container matColumnDef="g">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Institution Name </th>
        <td mat-cell *matCellDef="let user" class="fontS"> {{user.instituteName}} </td>
    </ng-container>
    <ng-container matColumnDef="h">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Registered On </th>
        <td mat-cell *matCellDef="let user" class="fontS"> {{user.createdAt}} </td>
    </ng-container>
    <ng-container matColumnDef="i">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Payment Receipt </th>
        <td mat-cell *matCellDef="let user" class="fontS"> 
            <a *ngIf="user.receipt != ''" [href]="url+user._id+'/receipt1.'+user.receipt">Download Receipt</a>
            <span class="fontS" *ngIf="user.receipt==''">Event not registered</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="j">
        <th mat-header-cell *matHeaderCellDef class="fontS"> UPI ID </th>
        <td mat-cell *matCellDef="let user" class="fontS"> 
            <span class="fontS" *ngIf="user.receipt==''">Event not registered</span>
            <span class="fontS" *ngIf="user.receipt!=''">{{user.upiId}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="k">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Coupon Photo </th>
        <td mat-cell *matCellDef="let user" class="fontS"> 
            <span class="fontS" *ngIf="!user.couponPhoto">Coupon Photo not added</span>
            <a *ngIf="user.couponPhoto" [href]="url+user._id+'/couponPhoto.'+user.couponPhoto">Download Coupon Photo</a>
        </td>
    </ng-container>
    <ng-container matColumnDef="l">
        <th mat-header-cell *matHeaderCellDef class="fontS"> Action </th>
        <td mat-cell *matCellDef="let user" class="fontS"> 
            <button mat-icon-button
             (click)="verifyUser(user)"
            ><mat-icon color="accent" *ngIf="!user.verified">check_circle</mat-icon>
            <mat-icon color="primary" *ngIf="user.verified">not_interested</mat-icon>
        </button>
            <!-- <mat-icon class="text-success" *ngIf="user.verified">verified_user</mat-icon> -->
            <button mat-icon-button (click)="deleteUser(user)"><mat-icon color="warn">delete</mat-icon></button>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator #paginator [pageSizeOptions]="[10, 20]" class="fontS" showFirstLastButtons></mat-paginator>
</div>
<br>
<div class="loader-holder" *ngIf="loading">
<div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
</div>